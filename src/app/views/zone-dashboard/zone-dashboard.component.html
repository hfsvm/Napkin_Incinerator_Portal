<!-- Timer Display -->
<div class="refresh-circle">
  <span class="time">{{ timerDisplay }}</span>
</div>

<div class="dashboard-wrapper d-flex">
  <!-- Left Section: Cards and Charts -->
  <div class="cards-section pe-3">
    <h2 class="zone-title">Zone: {{ zone.split(' ')[1] || zone }}</h2>

    <!-- Charts Section -->
    
      <!-- Status Chart -->
       <div class="row mt-2">
       
      <div class="col-lg-6 col-md-12 mb-3">
        <div #statusChart class="donut-chart"></div>
        <div class="status-legend mt-3">
          <div class="d-flex flex-wrap justify-content-center">
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box online me-2"></span>
              <span>Online</span>
            </div>
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box offline me-2"></span>
              <span>Offline</span>
            </div>
          </div>
        </div>
      
      </div>

      <!-- Stock Chart -->

      <div class="col-lg-6 col-md-12 mb-3">
        
        <div #stockChart class="donut-chart"></div>
        <div class="status-legend mt-3">
          <div class="d-flex flex-wrap justify-content-center">
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box ok me-2"></span>
              <span>Ok</span>
            </div>
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box low me-2"></span>
              <span>Low</span>
            </div>
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box empty me-2"></span>
              <span>Empty</span>
            </div>
            <div class="legend-item d-flex align-items-center me-3 mb-2">
              <span class="color-box unknown me-2"></span>
              <span>Unknown</span>
            </div>
          </div>
        </div>
     
    </div>
    </div>

    <!-- First Row -->
    <div class="card-row">
      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon install-icon">
            <i class="fa fa-cogs"></i>
          </div>
          <div class="card-value">{{ dashboardData.machinesInstalled || 0 }}</div>
        </div>
        <p class="card-label">Machines Installed</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon running-icon">
            <i class="fa fa-play-circle"></i>
          </div>
          <div class="card-value">{{ dashboardData.machinesRunning || 0 }}</div>
        </div>
        <p class="card-label">Machines Running</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon collection-icon">
            <i class="fa fa-inr"></i>
          </div>
          <div class="card-value">{{ dashboardData.totalCollection || 0 }}</div>
        </div>
        <p class="card-label">Total Collection</p>
      </div>
    </div>

    <!-- Second Row -->
    <div class="card-row">
      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon dispensed-icon">
            <i class="fa fa-shopping-bag"></i>
          </div>
          <div class="card-value">{{ dashboardData.itemsDispensed || 0 }}</div>
        </div>
        <p class="card-label">Items Dispensed</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon empty-stock-icon">
            <i class="fa fa-times-circle"></i>
          </div>
          <div class="card-value">{{ dashboardData.stockEmpty || 0 }}</div>
        </div>
        <p class="card-label">Stock Empty</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon low-stock-icon">
            <i class="fa fa-exclamation-triangle"></i>
          </div>
          <div class="card-value">{{ dashboardData.stockLow || 0 }}</div>
        </div>
        <p class="card-label">Stock Low</p>
      </div>
    </div>

    <!-- Third Row -->
    <div class="card-row">
      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon error-icon">
            <i class="fa fa-bug"></i>
          </div>
          <div class="card-value">0</div>
        </div>
        <p class="card-label">Stock Error</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon ok-icon">
            <i class="fa fa-check-circle"></i>
          </div>
          <div class="card-value">{{ dashboardData.stockOk || 0 }}</div>
        </div>
        <p class="card-label">Stock Okay</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon idle-icon">
            <i class="fa fa-pause-circle"></i>
          </div>
          <div class="card-value">0</div>
        </div>
        <p class="card-label">Burning Idle</p>
      </div>
    </div>

    <!-- Fourth Row -->
    <div class="card-row">
      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon enabled-icon">
            <i class="fa fa-fire"></i>
          </div>
          <div class="card-value">{{ dashboardData.burningEnabled || 0 }}</div>
        </div>
        <p class="card-label">Burning Enabled</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon burning-error-icon">
            <i class="fa fa-exclamation-circle"></i>
          </div>
          <div class="card-value">0</div>
        </div>
        <p class="card-label">Burning Error</p>
      </div>

      <div class="dashboard-card">
        <div class="card-top">
          <div class="card-icon cycle-icon">
            <i class="fa fa-sync"></i>
          </div>
          <div class="card-value">{{ dashboardData.totalBurningCycles || 0 }}</div>
        </div>
        <p class="card-label">Total Burning Cycle</p>
      </div>
    </div>
  </div>

  <!-- Right Section: Map -->
  <div class="map-section w-60">
    <div class="map-container shadow-lg rounded">
      <div id="map" style="width: 100%; height: 650px;"></div>
    </div>

    <!-- Map View Controls -->
    <div class="map-controls bg-white p-3 mt-3 rounded shadow">
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mapViewOptions" id="radioMachine" value="machine"
               [(ngModel)]="selectedMapView" (change)="changeMapView('machine')">
        <label class="form-check-label" for="radioMachine">Machines</label>
      </div>

      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mapViewOptions" id="radioZone" value="zone"
               [(ngModel)]="selectedMapView" (change)="changeMapView('zone')">
        <label class="form-check-label" for="radioZone">Zone</label>
      </div>

      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mapViewOptions" id="radioWard" value="ward"
               [(ngModel)]="selectedMapView" (change)="changeMapView('ward')">
        <label class="form-check-label" for="radioWard">Ward</label>
      </div>

      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="mapViewOptions" id="radioBeat" value="beat"
               [(ngModel)]="selectedMapView" (change)="changeMapView('beat')">
        <label class="form-check-label" for="radioBeat">Beat</label>
      </div>
    </div>
  </div>
</div>
